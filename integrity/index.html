<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Signed but not Safe (Static)</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 1rem;
      }
      textarea {
        width: 100%;
        min-height: 120px;
        font-family: monospace;
      }
      pre {
        background: #111;
        color: #0f0;
        padding: 0.75rem;
        overflow-x: auto;
      }
      .error {
        color: #c00;
        font-weight: 600;
      }
      .ok {
        color: #0a0;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <h1>Signed but not Safe (Static)</h1>
    <p>
      This page simulates a signed plugin update mechanism fully in the
      browser. It uses a public RSA key from <code>public.pem</code> to derive
      an HS256 key and verify update tokens.
    </p>
    <p>
      If the token is valid and the manifest contains an
      <code>evil</code> plugin, the page will execute it and show its log
      output below.
    </p>

    <h2>Step 1: Paste your update token</h2>
    <textarea id="token-input" placeholder="Paste JWT updateToken here..."></textarea>
    <br />
    <button id="run-btn">Apply update token</button>

    <p id="status"></p>

    <h2>Plugin logs</h2>
    <pre id="logs">[no logs yet]</pre>

    <script type="module" src="scripts/app.js"></script>
  </body>
</html>
